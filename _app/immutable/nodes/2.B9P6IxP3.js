import"../chunks/DsnmJJEf.js";import"../chunks/CjptJw2W.js";import{A as y,B as l,C as k,D as S,E as e,F as s,G as d}from"../chunks/BgoK_TFk.js";import{s as b}from"../chunks/DJ0yG2oi.js";import{b as p}from"../chunks/DHwI-KUf.js";var _=y(`<div class="min-h-screen w-full scroll-smooth bg-gradient-to-b from-slate-50 to-slate-100 text-slate-800 p-6 md:p-10"><div class="max-w-7xl mx-auto"><header class="mb-8"><h1 class="text-2xl md:text-3xl font-bold tracking-tight">–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø–æ—Ç–æ–∫–∏ –ø–æ —Å–µ—Ä–≤–∏—Å–∞–º</h1> <p class="text-sm md:text-base text-slate-600 mt-2">CRM (—á–∞—Ç/–∏–Ω–≤–æ–π—Å—ã/–±–∏–ª–ª–∏–Ω–≥/–º–∞—Ä–∂–∞/—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞), –í–∏—Ç—Ä–∏–Ω–∞ (–º–∞–≥–∞–∑–∏–Ω),
                ETL (Go) + –æ–±—â–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (PostgreSQL, OpenSearch, MinIO,
                Dragonfly, NATS).</p> <nav class="mt-4 flex flex-wrap gap-2"><a href="https://excalidraw.com/#room=197a1f2dba8d55b0ba54,u9Wn2EpMpz1lPOXYqXALqA" target="_blank" rel="noopener" class="text-xs md:text-sm px-3 py-1 rounded-full border bg-white hover:bg-slate-50 font-medium">–ë–æ–ª–µ–µ –æ–±—â–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤ Exalidraw ‚Üó</a> <a class="text-xs md:text-sm px-3 py-1 rounded-full border bg-white hover:bg-slate-50">–ü–ª–∞–Ω-—Å—Ä–æ–∫–∏</a></nav></header> <section id="overview" class="scroll-mt-24"><div class="mb-3"><h2 class="text-lg font-semibold text-slate-700">–û–±—â–∏–π –æ–±–∑–æ—Ä: –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ ‚Üí ETL ‚Üí –®–∏–Ω–∞ ‚Üí –•—Ä–∞–Ω–∏–ª–∏—â–∞ ‚Üí
                    API/CRM/–í–∏—Ç—Ä–∏–Ω–∞</h2></div> <div class="grid grid-cols-1 xl:grid-cols-2 gap-8"><div><div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏</h3></div> <p class="text-sm text-slate-600 mb-3">Treolan (REST), VTT (SOAP), –¥—Ä—É–≥–∏–µ API/–ø–∞—Ä—Å–∏–Ω–≥</p> <span class="inline-block text-xs bg-slate-100 border border-slate-200 rounded-full px-2 py-0.5 mr-1 mb-1">–ö–∞—Ç–∞–ª–æ–≥–∏</span> <span class="inline-block text-xs bg-slate-100 border border-slate-200 rounded-full px-2 py-0.5 mr-1 mb-1">Runtime —Ü–µ–Ω—ã/–æ—Å—Ç–∞—Ç–∫–∏</span> <span class="inline-block text-xs bg-slate-100 border border-slate-200 rounded-full px-2 py-0.5 mr-1 mb-1">–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã/–º–µ–¥–∏–∞</span></div> <div class="flex justify-center my-2"><svg width="18" height="36" viewBox="0 0 18 36" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><marker id="arrowhead" markerWidth="8" markerHeight="8" refX="4" refY="2.5" orient="auto"><polygon points="0 0, 5 2.5, 0 5" fill="#10b981"></polygon></marker></defs><line x1="9" y1="0" x2="9" y2="28" stroke="#10b981" stroke-width="2" marker-end="url(#arrowhead)"></line></svg></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">ETL –í–æ—Ä–∫–µ—Ä—ã (Go)</h3></div> <p class="text-sm text-slate-600 mb-3">–ö–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è, –¥–µ–¥—É–ø, —Ä–∞—Å—á—ë—Ç —Ü–µ–Ω,
                            –∑–∞–≥—Ä—É–∑–∫–∞ –º–µ–¥–∏–∞</p> <ul class="list-disc pl-5 space-y-1 text-sm"><li>–ú—ç–ø–ø–∏–Ω–≥ –±—Ä–µ–Ω–¥–æ–≤/–∫–∞—Ç–µ–≥–æ—Ä–∏–π, –¥–µ–¥—É–ø SKU</li> <li>–ü—Ä–∞–≤–∏–ª–∞ –º–∞—Ä–∂–∏/–Ω–∞—Ü–µ–Ω–∫–∏, –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ</li> <li>–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π ‚Üí MinIO (S3)</li> <li>–ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –≤ NATS</li></ul></div> <div class="flex justify-center my-2"><svg width="18" height="36" viewBox="0 0 18 36" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><marker id="arrowhead2" markerWidth="8" markerHeight="8" refX="4" refY="2.5" orient="auto"><polygon points="0 0, 5 2.5, 0 5" fill="#10b981"></polygon></marker></defs><line x1="9" y1="0" x2="9" y2="28" stroke="#10b981" stroke-width="2" marker-end="url(#arrowhead2)"></line></svg></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">NATS JetStream</h3></div> <p class="text-sm text-slate-600 mb-3">–®–∏–Ω–∞ —Å–æ–±—ã—Ç–∏–π/–æ—á–µ—Ä–µ–¥–∏ (—Å—Ç—Ä–∏–º—ã, durable-consumers)</p> <span class="inline-block text-xs bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-full px-2 py-0.5 mr-1 mb-1">events: offers.updated</span> <span class="inline-block text-xs bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-full px-2 py-0.5 mr-1 mb-1">events: price.updated</span> <span class="inline-block text-xs bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-full px-2 py-0.5 mr-1 mb-1">cmd: search.delta.index</span> <span class="inline-block text-xs bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-full px-2 py-0.5 mr-1 mb-1">cmd: cache.invalidate</span></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6"><div><div class="flex justify-center my-2"><svg width="18" height="36" viewBox="0 0 18 36" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><marker id="arrowhead3" markerWidth="8" markerHeight="8" refX="4" refY="2.5" orient="auto"><polygon points="0 0, 5 2.5, 0 5" fill="#94a3b8"></polygon></marker></defs><line x1="9" y1="0" x2="9" y2="28" stroke="#94a3b8" stroke-width="2" stroke-dasharray="4 4" marker-end="url(#arrowhead3)"></line></svg></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">PostgreSQL</h3></div> <p class="text-sm text-slate-600 mb-3">products / offers / rules / orders / bills /
                                    users</p> <ul class="list-disc pl-5 space-y-1 text-sm"><li>–°—Ö–µ–º—ã: <strong>catalog</strong>, <strong>commerce</strong>, <strong>pricing</strong></li> <li>–†–æ–ª–∏: etl_rw / api_rw</li></ul></div></div> <div><div class="flex justify-center my-2"><svg width="18" height="36" viewBox="0 0 18 36" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><marker id="arrowhead4" markerWidth="8" markerHeight="8" refX="4" refY="2.5" orient="auto"><polygon points="0 0, 5 2.5, 0 5" fill="#94a3b8"></polygon></marker></defs><line x1="9" y1="0" x2="9" y2="28" stroke="#94a3b8" stroke-width="2" stroke-dasharray="4 4" marker-end="url(#arrowhead4)"></line></svg></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">OpenSearch</h3></div> <p class="text-sm text-slate-600 mb-3">–ò–Ω–¥–µ–∫—Å –∫–∞—Ç–∞–ª–æ–≥–∞, —Ñ–∞—Å–µ—Ç—ã, –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç</p> <ul class="list-disc pl-5 space-y-1 text-sm"><li>Œî-–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ø–æ —Å–æ–±—ã—Ç–∏—è–º</li> <li>–§–∏–ª—å—Ç—Ä—ã/–∞–≥—Ä–µ–≥–∞—Ü–∏–∏/—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å</li></ul></div></div></div> <div class="flex justify-center my-2"><svg width="18" height="36" viewBox="0 0 18 36" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><marker id="arrowhead5" markerWidth="8" markerHeight="8" refX="4" refY="2.5" orient="auto"><polygon points="0 0, 5 2.5, 0 5" fill="#10b981"></polygon></marker></defs><line x1="9" y1="0" x2="9" y2="28" stroke="#10b981" stroke-width="2" marker-end="url(#arrowhead5)"></line></svg></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">MinIO (S3) + CDN</h3></div> <p class="text-sm text-slate-600 mb-3">–ö–∞—Ä—Ç–∏–Ω–∫–∏/–¥–æ–∫—É–º–µ–Ω—Ç—ã (immutable, –≤–µ—Ä—Å–∏–∏)</p> <ul class="list-disc pl-5 space-y-1 text-sm"><li>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è webp/avif, –ø—Ä–µ–≤—å—é</li> <li>–†–∞–∑–¥–∞—á–∞ —á–µ—Ä–µ–∑ CDN (Cache-Control: immutable)</li> <li></li></ul> <p class="text-xs text-slate-500 mt-2">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —É—Ö–æ–¥—è—Ç –Ω–∞–ø—Ä—è–º—É—é –≤ –±—Ä–∞—É–∑–µ—Ä—ã —á–µ—Ä–µ–∑ CDN.</p></div></div> <div><div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">SvelteKit —Ñ—Ä–æ–Ω—Ç—ã</h3></div> <p class="text-sm text-slate-600 mb-3">–í–∏—Ç—Ä–∏–Ω–∞ (Shop) –∏ CRM/–ê–¥–º–∏–Ω–∫–∞</p> <span class="inline-block text-xs bg-slate-100 border border-slate-200 rounded-full px-2 py-0.5 mr-1 mb-1">SSR/SPA</span> <span class="inline-block text-xs bg-slate-100 border border-slate-200 rounded-full px-2 py-0.5 mr-1 mb-1">RBAC</span></div> <div class="flex justify-center my-2"><svg width="18" height="36" viewBox="0 0 18 36" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><marker id="arrowhead6" markerWidth="8" markerHeight="8" refX="4" refY="2.5" orient="auto"><polygon points="0 0, 5 2.5, 0 5" fill="#10b981"></polygon></marker></defs><line x1="9" y1="0" x2="9" y2="28" stroke="#10b981" stroke-width="2" marker-end="url(#arrowhead6)"></line></svg></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">Backend API (Node.js + Fastify)</h3></div> <p class="text-sm text-slate-600 mb-3">–ü—É–±–ª–∏—á–Ω–æ–µ + –ê–¥–º–∏–Ω API, –ø–æ–¥–ø–∏—Å—á–∏–∫–∏ NATS</p> <ul class="list-disc pl-5 space-y-1 text-sm"><li>–ú–∞—Ä—à—Ä—É—Ç—ã: –ø–æ–∏—Å–∫/–∫–∞—Ç–µ–≥–æ—Ä–∏–∏/–∫–∞—Ä—Ç–æ—á–∫–∏/—á–µ–∫–∞—É—Ç</li> <li>–ê–¥–º–∏–Ω: –ø—Ä–∞–π—Å-–ø—Ä–∞–≤–∏–ª–∞, –∑–∞–∫–∞–∑—ã, —á–∞—Ç</li> <li>–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–µ–π –ø–æ —Å–æ–±—ã—Ç–∏—è–º</li></ul></div> <div class="flex justify-center my-2"><svg width="18" height="36" viewBox="0 0 18 36" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><marker id="arrowhead7" markerWidth="8" markerHeight="8" refX="4" refY="2.5" orient="auto"><polygon points="0 0, 5 2.5, 0 5" fill="#10b981"></polygon></marker></defs><line x1="9" y1="0" x2="9" y2="28" stroke="#10b981" stroke-width="2" marker-end="url(#arrowhead7)"></line></svg></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">Dragonfly (–∫—ç—à)</h3></div> <p class="text-sm text-slate-600 mb-3">–ö—ç—à —Å–ø–∏—Å–∫–æ–≤/–ø–æ–∏—Å–∫–∞/—Å–µ—Å—Å–∏–π (TTL + –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è)</p> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4"><div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">PostgreSQL (RO/RW)</h3></div> <p class="text-sm text-slate-600">–î–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–æ–≤, –∑–∞–∫–∞–∑—ã, —Å—á–µ—Ç–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</p></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">OpenSearch (query)</h3></div> <p class="text-sm text-slate-600">–í—ã–¥–∞—á–∞, —Ñ–∏–ª—å—Ç—Ä—ã, —Ñ–∞—Å–µ—Ç—ã, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏</p></div></div> <p class="text-xs text-slate-500 mt-2">Backend —á–∏—Ç–∞–µ—Ç OpenSearch –¥–ª—è —Å–ø–∏—Å–∫–æ–≤/—Ñ–∞—Å–µ—Ç–æ–≤,
                            Postgres ‚Äî –¥–ª—è –¥–µ—Ç–∞–ª–µ–π/–∑–∞–∫–∞–∑–æ–≤.</p></div></div></div> <div class="mt-10 grid grid-cols-1 md:grid-cols-3 gap-6"><div class="rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-indigo-500"></div> <h3 class="font-semibold">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h3></div> <ul class="list-disc pl-5 space-y-1 text-sm"><li>JWT + RBAC –¥–ª—è CRM/–∞–¥–º–∏–Ω–∫–∏</li> <li>–°–µ–∫—Ä–µ—Ç—ã –≤ Vault/k8s Secrets</li> <li>Rate limit, CORS, –∞—É–¥–∏—Ç</li></ul></div> <div class="rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-indigo-500"></div> <h3 class="font-semibold">–ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å</h3></div> <ul class="list-disc pl-5 space-y-1 text-sm"><li>Prometheus + Grafana (–º–µ—Ç—Ä–∏–∫–∏)</li> <li>Loki (–ª–æ–≥–∏), –∞–ª–µ—Ä—Ç—ã</li> <li>–î—ç—à–±–æ—Ä–¥—ã: –¥–µ–ª—å—Ç—ã/–∏–Ω–¥–µ–∫—Å—ã/–æ—á–µ—Ä–µ–¥–∏</li></ul></div> <div class="rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-indigo-500"></div> <h3 class="font-semibold">–î–µ–ø–ª–æ–π</h3></div> <ul class="list-disc pl-5 space-y-1 text-sm"><li>Dev: docker-compose</li> <li>Prod: Kubernetes + GitOps</li> <li>Managed Postgres/OpenSearch</li></ul></div></div></section> <section id="shop" class="mt-14 scroll-mt-24"><div class="mb-3"><h2 class="text-lg font-semibold text-slate-700">–í–∏—Ç—Ä–∏–Ω–∞ (Shop): –æ—Ç–∫—É–¥–∞ –±–µ—Ä—ë—Ç –¥–∞–Ω–Ω—ã–µ –∏ —á—Ç–æ –ø–∏—à–µ—Ç</h2></div> <div class="rounded-2xl border border-slate-200 bg-white shadow-sm p-5"><div class="grid grid-cols-1 lg:grid-cols-[1fr_auto_1fr_auto_1fr] items-center gap-4"><div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">–ë—Ä–∞—É–∑–µ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3></div> <p class="text-sm text-slate-600">SvelteKit (SSR/SPA)</p></div> <div class="flex justify-center"><svg width="60" height="20" viewBox="0 0 60 20" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><marker id="arrowhead-right" markerWidth="8" markerHeight="8" refX="4" refY="2.5" orient="auto"><polygon points="0 0, 5 2.5, 0 5" fill="#10b981"></polygon></marker></defs><line x1="0" y1="10" x2="52" y2="10" stroke="#10b981" stroke-width="2" marker-end="url(#arrowhead-right)"></line></svg></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">Backend API</h3></div> <p class="text-sm text-slate-600">Fastify ‚Äî –ø—É–±–ª–∏—á–Ω–æ–µ API</p></div> <div class="flex justify-center"><svg width="60" height="20" viewBox="0 0 60 20" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><marker id="arrowhead-right2" markerWidth="8" markerHeight="8" refX="4" refY="2.5" orient="auto"><polygon points="0 0, 5 2.5, 0 5" fill="#10b981"></polygon></marker></defs><line x1="0" y1="10" x2="52" y2="10" stroke="#10b981" stroke-width="2" marker-end="url(#arrowhead-right2)"></line></svg></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">Dragonfly</h3></div> <p class="text-sm text-slate-600">–∫—ç—à: —Å–ø–∏—Å–∫–∏/—Ñ–∏–ª—å—Ç—Ä—ã/—Å–µ—Å—Å–∏–∏</p></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">OpenSearch (read)</h3></div> <p class="text-sm text-slate-600">–ø–æ–∏—Å–∫, —Ñ–∞—Å–µ—Ç—ã, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏</p></div></div></div> <div class="grid grid-cols-1 lg:grid-cols-[1fr_auto_1fr_auto_1fr] items-center gap-4 mt-6"><div></div> <div class="hidden lg:block"></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">PostgreSQL (read/write)</h3></div> <p class="text-sm text-slate-600">–¥–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∫–æ—Ä–∑–∏–Ω—ã, –∑–∞–∫–∞–∑—ã</p></div> <div class="flex justify-center"><svg width="60" height="20" viewBox="0 0 60 20" fill="none" xmlns="http://www.w3.org/2000/svg"><use href="#arrowhead-right"></use></svg></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">NATS (publish)</h3></div> <p class="text-sm text-slate-600">events: order.created, cart.checkedout</p></div></div> <div class="grid grid-cols-1 lg:grid-cols-[1fr_auto_1fr_auto_1fr] items-center gap-4 mt-6"><div></div> <div class="hidden lg:block"></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">MinIO/CDN (read)</h3></div> <p class="text-sm text-slate-600">–∫–∞—Ä—Ç–∏–Ω–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤</p></div> <div class="flex justify-center"><svg width="60" height="20" viewBox="0 0 60 20" fill="none" xmlns="http://www.w3.org/2000/svg"><use href="#arrowhead-right"></use></svg></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">–ü–ª–∞—Ç—ë–∂–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä</h3></div> <p class="text-sm text-slate-600">—ç–∫–≤–∞–π—Ä–∏–Ω–≥ –∫–ª–∏–µ–Ω—Ç–∞ —É –≤–∞—Å</p></div></div> <p class="text-xs text-slate-500 mt-2">Write: –∑–∞–∫–∞–∑—ã/–∫–∞–±–∏–Ω–µ—Ç ‚Üí Postgres (schema: <strong>commerce</strong>). Read: —Å–ø–∏—Å–∫–∏/—Ñ–∏–ª—å—Ç—Ä—ã –∏–∑ OpenSearch,
                    –∫–∞—Ä—Ç–æ—á–∫–∏/–æ—Å—Ç–∞—Ç–∫–∏/—Ü–µ–Ω—ã –∏–∑ Postgres (+ –∫—ç—à Dragonfly). –ú–µ–¥–∏–∞ ‚Äî
                    MinIO —á–µ—Ä–µ–∑ CDN.</p></div></section> <section id="crm" class="mt-14 scroll-mt-24"><div class="mb-3"><h2 class="text-lg font-semibold text-slate-700">CRM/–ê–¥–º–∏–Ω–∫–∞: —á–∞—Ç, –∏–Ω–≤–æ–π—Å—ã, –±–∏–ª–ª–∏–Ω–≥, –º–∞—Ä–∂–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2></div> <div class="rounded-2xl border border-slate-200 bg-white shadow-sm p-5"><div class="grid grid-cols-1 lg:grid-cols-[1fr_auto_1fr_auto_1fr] items-center gap-4"><div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">–ë—Ä–∞—É–∑–µ—Ä –º–µ–Ω–µ–¥–∂–µ—Ä–∞</h3></div> <p class="text-sm text-slate-600">SvelteKit CRM (RBAC)</p></div> <div class="flex justify-center"><svg width="60" height="20" viewBox="0 0 60 20" fill="none" xmlns="http://www.w3.org/2000/svg"><use href="#arrowhead-right"></use></svg></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">Backend API (admin)</h3></div> <p class="text-sm text-slate-600">Fastify ‚Äî –∞–¥–º–∏–Ω—Å–∫–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã + WS –¥–ª—è —á–∞—Ç–∞</p></div> <div class="flex justify-center"><svg width="60" height="20" viewBox="0 0 60 20" fill="none" xmlns="http://www.w3.org/2000/svg"><use href="#arrowhead-right"></use></svg></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">PostgreSQL (read/write)</h3></div> <p class="text-sm text-slate-600">–ø—Ä–∞–≤–∏–ª–∞ —Ü–µ–Ω (pricing), —Å—á–µ—Ç–∞, –∑–∞–∫–∞–∑—ã, —á–∞—Ç</p></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">NATS (publish/sub)</h3></div> <p class="text-sm text-slate-600">cmd: supplier.order.create; events: bill.updated</p></div></div></div> <div class="grid grid-cols-1 lg:grid-cols-[1fr_auto_1fr_auto_1fr] items-center gap-4 mt-6"><div></div> <div class="hidden lg:block"></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">OpenSearch (read)</h3></div> <p class="text-sm text-slate-600">–ø–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–∞–ª–æ–≥—É –∏–∑ –∞–¥–º–∏–Ω–∫–∏ (–º–æ–¥–µ—Ä–∞—Ü–∏—è)</p></div> <div class="flex justify-center"><svg width="60" height="20" viewBox="0 0 60 20" fill="none" xmlns="http://www.w3.org/2000/svg"><use href="#arrowhead-right"></use></svg></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">MinIO/CDN (read)</h3></div> <p class="text-sm text-slate-600">–º–µ–¥–∏–∞ –∫–∞—Ä—Ç–æ—á–µ–∫, —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã</p></div></div> <div class="grid grid-cols-1 lg:grid-cols-[1fr_auto_1fr_auto_1fr] items-center gap-4 mt-6"><div></div> <div class="hidden lg:block"></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">–ü–ª–∞—Ç—ë–∂–∫–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤</h3></div> <p class="text-sm text-slate-600">—Å—á–µ—Ç–∞/–Ω–∞–∫–ª–∞–¥–Ω—ã–µ –≤–Ω–µ API –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (—Ä—É—á–Ω–∞—è –æ–ø–ª–∞—Ç–∞)</p></div> <div class="flex justify-center"><svg width="60" height="20" viewBox="0 0 60 20" fill="none" xmlns="http://www.w3.org/2000/svg"><use href="#arrowhead-right"></use></svg></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">–û—Ç—á—ë—Ç–Ω–æ—Å—Ç—å</h3></div> <p class="text-sm text-slate-600">Postgres (–∏/–∏–ª–∏ ClickHouse) ‚Üí –¥–∞—à–±–æ—Ä–¥—ã</p></div></div> <p class="text-xs text-slate-500 mt-2">–î–µ–π—Å—Ç–≤–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ (—Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ —É –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞) ‚Üí publish –≤
                    NATS ‚Üí ETL –≤—ã–∑—ã–≤–∞–µ—Ç API –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç Postgres,
                    —à–ª—ë—Ç events –¥–ª—è UI.</p></div></section> <section id="etl" class="mt-14 scroll-mt-24"><div class="mb-3"><h2 class="text-lg font-semibold text-slate-700">ETL (Go): –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è</h2></div> <div class="rounded-2xl border border-slate-200 bg-white shadow-sm p-5"><div class="grid grid-cols-1 lg:grid-cols-[1fr_auto_1fr_auto_1fr] items-center gap-4"><div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏</h3></div> <p class="text-sm text-slate-600 mb-3">Treolan (REST), VTT (SOAP), –ø–∞—Ä—Å–∏–Ω–≥</p> <span class="inline-block text-xs bg-slate-100 border border-slate-200 rounded-full px-2 py-0.5 mr-1 mb-1">–ö–∞—Ç–∞–ª–æ–≥–∏/–∫–∞—Ç–µ–≥–æ—Ä–∏–∏</span> <span class="inline-block text-xs bg-slate-100 border border-slate-200 rounded-full px-2 py-0.5 mr-1 mb-1">Runtime —Ü–µ–Ω—ã/–æ—Å—Ç–∞—Ç–∫–∏</span> <span class="inline-block text-xs bg-slate-100 border border-slate-200 rounded-full px-2 py-0.5 mr-1 mb-1">–ú–µ–¥–∏–∞/—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã</span></div> <div class="flex justify-center"><svg width="60" height="20" viewBox="0 0 60 20" fill="none" xmlns="http://www.w3.org/2000/svg"><use href="#arrowhead-right"></use></svg></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">ETL –í–æ—Ä–∫–µ—Ä—ã (Go)</h3></div> <p class="text-sm text-slate-600 mb-3">fetch ‚Üí normalize ‚Üí dedup ‚Üí price ‚Üí publish</p> <ul class="list-disc pl-5 space-y-1 text-sm"><li>Retry/backoff, –ª–∏–º–∏—Ç—ã, SLA –Ω–∞ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã</li> <li>–ë—Ä–µ–Ω–¥/–∫–∞—Ç–µ–≥–æ—Ä–∏—è –º—ç–ø–ø–∏–Ω–≥, –º–µ—Ä–¥–∂ –æ—Ñ—Ñ–µ—Ä–æ–≤</li> <li>–ü—Ä–∞–≤–∏–ª–∞ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è (pricing)</li></ul></div> <div class="flex justify-center"><svg width="60" height="20" viewBox="0 0 60 20" fill="none" xmlns="http://www.w3.org/2000/svg"><use href="#arrowhead-right"></use></svg></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">PostgreSQL (write)</h3></div> <p class="text-sm text-slate-600">catalog/offers/pricing</p></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">NATS (publish)</h3></div> <p class="text-sm text-slate-600">events: offers.updated, price.updated</p></div></div></div> <div class="grid grid-cols-1 lg:grid-cols-[1fr_auto_1fr_auto_1fr] items-center gap-4 mt-6"><div></div> <div class="hidden lg:block"></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">OpenSearch (write)</h3></div> <p class="text-sm text-slate-600">Œî-–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞/—Ñ–∞—Å–µ—Ç–æ–≤</p></div> <div class="flex justify-center"><svg width="60" height="20" viewBox="0 0 60 20" fill="none" xmlns="http://www.w3.org/2000/svg"><use href="#arrowhead-right"></use></svg></div> <div class="relative rounded-2xl border border-slate-200 bg-white shadow-sm p-4"><div class="flex items-center gap-2 mb-1"><div class="h-2 w-2 rounded-full bg-emerald-500"></div> <h3 class="font-semibold">MinIO (write) + CDN</h3></div> <p class="text-sm text-slate-600">—Å–∫–∞—á–∞—Ç—å/–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ–¥–∏–∞ ‚Üí –∑–∞–≥—Ä—É–∑–∏—Ç—å</p></div></div> <p class="text-xs text-slate-500 mt-2">–ö–æ–º–∞–Ω–¥—ã –∏–∑ CRM: <code>supplier.order.create</code>/<code>bill.create</code> ‚Üí ETL –≤—ã–∑—ã–≤–∞–µ—Ç API –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞, –ø–∏—à–µ—Ç —Å—Ç–∞—Ç—É—Å/—Å—á—ë—Ç –≤ Postgres,
                    –ø—É–±–ª–∏–∫—É–µ—Ç <code>bill.updated</code>.</p></div></section> <section id="screenshot" class="mt-14 scroll-mt-24"><div class="mb-3"><h2 class="text-lg font-semibold text-slate-700">–°–∫—Ä–∏–Ω—à–æ—Ç/–ø—Ä–µ–≤—å—é –¥–ª—è –∑–∞–∫–∞–∑—á–∏–∫–∞</h2></div> <div class="rounded-2xl border border-slate-200 bg-white shadow-sm p-5"><p class="text-sm text-slate-600 mb-3">–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤ <a href="https://excalidraw.com/#room=197a1f2dba8d55b0ba54,u9Wn2EpMpz1lPOXYqXALqA" target="_blank" class="text-sky-800">Excalidraw</a>.</p> <img alt="–°–∫—Ä–∏–Ω—à–æ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã" class="w-full rounded-xl border"/></div></section> <footer class="mt-12 text-xs text-slate-500">*Keycloak ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è SSO/LDAP. –í—ã–¥–∞—á–∞ —Å–ø–∏—Å–∫–æ–≤ ‚Äî
            –∏–∑ OpenSearch; –¥–µ—Ç–∞–ª–∏/—Ñ–∏–Ω–∞–Ω—Å—ã ‚Äî –∏–∑ Postgres; –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî
            Dragonfly; —Å–æ–±—ã—Ç–∏—è/–∫–æ–º–∞–Ω–¥—ã ‚Äî NATS. <a href="https://t.me/sharpsss" class="text-neutral-500 text-sm" target="_blank">üê®sharpsss dev</a></footer></div></div>`);function C(x){var t=_(),a=e(t),r=e(a),o=l(e(r),4),f=l(e(o),2);s(o),s(r);var i=l(r,2),c=l(e(i),2),v=e(c),n=l(e(v),14),m=l(e(n),4),w=l(e(m),4);w.textContent="URL: cdn.remo-shop.ru/p/{id}/img/{hash}.webp",s(m),d(2),s(n),s(v),d(2),s(c),d(2),s(i);var h=l(i,8),g=l(e(h),2),u=l(e(g),2);s(g),s(h),d(2),s(a),s(t),k(()=>{b(f,"href",`${p??""}/preliminary_deadlines`),b(u,"src",`${p??""}/diagram.png`)}),S(x,t)}export{C as component};
